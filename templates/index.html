{% extends "base.html" %}

{% block title %}Exam Generator Home{% endblock %}

{% block body %}
<header>
    <h1>Exam Generator</h1>
</header>
<main>
    <h2>Create a New Exam</h2>
    <hr>
            <form id="create-exam-form" method="POST" action="{{ url_for('web.create_exam') }}">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="popup-message popup-{{ category }}">{{ message }}</div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <label for="exam-name">Exam Name:</label>
        <input type="text" id="exam-name" name="exam_name" required>
        <br><br>
        <label for="exam-json">Paste Exam JSON:</label><br>
    <textarea id="exam-json" name="exam_json" rows="10" cols="80" required placeholder='{"questions": [{"question": "...", "description": "...", "code": "...", "answer_alternatives": ["..."], "correct_answers": ["..."]}]}'></textarea>
        <br><br>
        <button type="submit">Create Exam</button>
    </form>
    <hr>
    <h2>Existing Exams</h2>
    <hr>
    {% if exams %}
    <ul>
        {% for exam in exams %}
        <li><a href="/exam/{{ exam[0] }}"><strong>{{ exam[1] }}</strong></a></li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No exams created yet.</p>
    {% endif %}
    <div id="popup-message" style="display:none;" class="popup-message">
        <span id="popup-close" style="float:right;cursor:pointer;font-size:1.2em;font-weight:bold;">&times;</span>
        <span id="popup-text"></span>
    </div>
    <script src="{{ url_for('static', filename='js/popup.js') }}"></script>
    <script src="{{ url_for('static', filename='js/exam.js') }}"></script>
</main>
{% endblock %}
